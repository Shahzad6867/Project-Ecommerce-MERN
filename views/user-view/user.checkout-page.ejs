<%- include("../partials/user-side/navbar.ejs")%>
    <div class="checkout-container">
        <!-- Checkout Form (visible by default) -->
        <div id="checkoutForm">
            <h1 class="text-3xl font-bold mb-8 text-start">Checkout</h1>
            <form id="orderForm" action="/checkout" method="post" >
            <div class="flex gap-8">
                 <!-- Left Column - Order Summary -->
                 <div class="w-[65%]">
                    <!-- Address Selection -->
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold">Select Address</h2>
                            <button type="button" onclick="openAddAddressModal()" class="btn-primary font-bold px-3 py-2 rounded-full flex items-center">
                               Add / Update Address
                            </button>
                        </div>
                        
                        <div class="flex flex-wrap gap-4" id="addressList">
                            
                            <% if (defaultAddress) { %>
                                <div id="defaultAddressCard" class="address-card w-[30%] border border-gray-300 p-4 relative">
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="font-medium">Default Address</h3>
                                        <span class="default-badge text-xs px-2 py-1 rounded-full">Default</span>
                                    </div>
                                    <div class="text-sm text-gray-600">
                                        <p><strong>Name:</strong><span id="firstName0"> <%= defaultAddress?.firstName %></span> <span id="lastName0"><%= defaultAddress?.lastName %></span></p>
                                        <p><strong>Country:</strong><span id="country0"> <%= defaultAddress?.country %></span></p>
                                        <p><strong>State:</strong><span id="state0"> <%= defaultAddress?.state %></span></p>
                                        <p><strong>City:</strong><span id="city0"> <%= defaultAddress?.city %></span></p>
                                        <p><strong>Address:</strong><span id="address0"> <%= defaultAddress?.address %></span></p>
                                        <p><strong>Pincode:</strong><span  id="pincode0" > <%= defaultAddress?.pincode %></span></p>
                                        <p  class="mt-2"><strong>Phone:</strong><span id="mobileNo0"> <%= defaultAddress?.mobileNo  %></span></p>
                                    </div>
                                    <div class="flex justify-end space-x-2 mt-3">
                                        <button type="button" id="editBtn0" onclick="editAddress(0,'<%- defaultAddress?._id %>')" class="crop-btn shadow-lg p-2 rounded-lg text-sm">
                                            Edit
                                        </button>
                                    </div>
                                </div>
                            <% }else{ %>
                                <div class="address-card w-[30%] border border-gray-300 p-4 relative">
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="font-medium">Default Address</h3>
                                        <span class="default-badge text-xs px-2 py-1 rounded-full">Default</span>
                                    </div>
                                    <div class="text-md text-gray-600">
                                        <p>Please add a delivery address to continue with checkout.</p>
                                    </div>
                                    
                                </div>
                                <% } %>
                             <% for( let i = 0; i < address.length; i++ ) { %>
                                <% if (!address[i]?.isDefault) { %>
                                    <div class="address-card w-[35%] border border-gray-300 p-4 relative">
                                        <div class="flex justify-between items-start mb-2">
                                            <h3 class="font-medium">Other Address <%= i + 1 %></h3>
                                            <button type="button" id="resetDefaultAddressBtn<%= i + 1 %>" onclick="changeDefaultAddress('<%- address[i]?._id %>','/checkout')" class="bg-green-400 hover:bg-green-500 font-bold shadow-lg p-2 rounded-xl text-sm">
                                                Set as Default
                                            </button>
                                        </div>
                                        <div class="text-sm text-gray-600">
                                           <p><strong>Name:</strong><span id="firstName<%= i+1 %>"> <%= address[i]?.firstName %></span> <span id="lastName<%= i+1 %>"><%= address[i]?.lastName %></span></p>
                                            <p><strong>Country:</strong><span id="country<%= i+1 %>"> <%= address[i]?.country %></span></p>
                                            <p><strong>State:</strong><span id="state<%= i+1 %>"> <%= address[i]?.state %></span></p>
                                            <p><strong>City:</strong><span id="city<%= i+1 %>"> <%= address[i]?.city %></span></p>
                                            <p><strong>Address:</strong><span id="address<%= i+1 %>"> <%= address[i]?.address %></span></p>
                                            <p><strong>Pincode:</strong><span  id="pincode<%= i+1 %>" > <%= address[i]?.pincode %></span></p>
                                            <p  class="mt-2"><strong>Phone:</strong><span id="mobileNo<%= i+1 %>"> <%= address[i]?.mobileNo  %></span></p>
                                        </div>
                                        <div class="flex justify-end space-x-2 mt-3">
                                            <button type="button" id="editBtn<%= i + 1 %>" onclick="editAddress('<%= i + 1%>','<%- address[i]?._id %>')" class="crop-btn shadow-lg p-2 rounded-lg text-sm">
                                                Edit
                                            </button>
                                        </div>
                                    </div>
                                <% } %>
                             <% } %>
                           
                            
                            <!-- Address 2 -->
                            
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm p-6 sticky top-4">
                        <h2 class="text-xl font-bold mb-4">Items in Your Cart</h2>
                        
                        <!-- Products List -->
                        <div class="flex flex-wrap mb-4">
                            <!-- Product 1 -->
                            <% let subTotal = 0 %>
                            <% let itemsWithStock = 0 %>
                           <% for( let i = 0; i < cartItems.length; i++ ) { %>
                            
                               <% if (!cartItems[i].productId.isDeleted) { %>
                                 <% if (cartItems[i].productId.variants[cartItems[i].variant].stockQuantity !== 0 && cartItems[i].productId.variants[cartItems[i].variant].stockStatus !== "Out of Stock") { %>
                                    <div class="py-4 px-2 mr-2 mb-2 border border-black rounded-md w-[49%] flex items-center">
                                        <input type="text" name="productId" value="<%= cartItems[i].productId._id %>" hidden>

                                        <input type="text" name="productImages" value="<%= cartItems[i].productId.variants[cartItems[i].variant].productImages[0] %>" hidden>
                                        <img src="<%= cartItems[i].productId.variants[cartItems[i].variant].productImages[0] %>" class="product-image rounded border border-black" alt="Product">
                                        <div class="ml-4 flex-1">
                                            <% let productName = null %>
                                            <% if (cartItems[i].productId.productName.length > 20) { %>
                                             <% productName = cartItems[i].productId.productName.slice(0,23) + "..." %>
                                            <% }else {%>
                                                <% productName = cartItems[i].productId.productName %>
                                                <% } %>
                                                <input type="text" name="productName" value="<%= cartItems[i].productId.productName %>" hidden>

                                            <h3 class="text-lg font-bold"><%= productName %></h3>

                                            <input type="text" name="variants" value="<%= cartItems[i].variant %>" hidden>
                                            <input type="text" name="color" value="<%= cartItems[i].productId.variants[cartItems[i].variant].color %>" hidden>

                                            <p class="text-md font-bold text-gray-500">Color: <span class="text-black font-bold"><%= cartItems[i].productId.variants[cartItems[i].variant].color %></span></p>

                                            <input type="text" name="size" value="<%= cartItems[i].productId.variants[cartItems[i].variant].size %>" hidden>

                                            <p class="text-md font-bold text-gray-500">Size: <span class="text-black font-bold"><%= cartItems[i].productId.variants[cartItems[i].variant].size %></span></p>
                                            <div class="flex items-center mt-1">
                                                <% itemsWithStock += cartItems[i].quantity %>
                                                <input type="number" name="quantity" value="<%= cartItems[i].quantity %>" hidden>

                                                <span class="text-md text-gray-600">Quantity: <span class="text-black font-bold"><%= cartItems[i].quantity %></span></span>
                                            </div>
                                            <% subTotal = subTotal + (cartItems[i].quantity * cartItems[i].productId.variants[cartItems[i].variant].price) %>
                                            <input type="number" name="price" value="<%= cartItems[i].productId.variants[cartItems[i].variant].price %>" hidden>
                                            <div class="text-xl font-bold">$<span ><%= cartItems[i].productId.variants[cartItems[i].variant].price %></span></div>
                                        </div>
                                        
                                    </div>
                                 <% } %>
                               <% } %>
                           <% } %>
                            
                           <% if (itemsWithStock === 0) { %>
                            <div class="py-4 px-2 h-[196px] mr-2 mb-2 border border-black rounded-md w-full flex justify-center flex-wrap items-center">
                                
                                <h1 class="text-2xl font-bold mr-2">Looks like you havenâ€™t added anything yet !</h1>
                                <a href="/shop"><button type="button"  class="btn-primary flex font-bold rounded-full px-4 py-2 mt-1 "><i data-feather="shopping-cart" class="mr-2"></i>Shop Now</button></a>
                            </div>
                           <% } %>
                            
                            
                            
                        </div>
                        
                        
                    </div>
                </div>
                <!-- Right Column - Shipping and Payment -->
                <div class="w-[35%]">
                    
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <!-- Order Summary -->
                        <h2 class="text-xl font-bold mb-4">Order Summary</h2>
                        <div class="space-y-3 border-gray-200 pt-4">
                            
                            <div class="flex justify-between">
                                <input type="number" name="subTotal" value="<%= Number(subTotal).toFixed(2) %>" hidden>
                                <span class="text-gray-600">Subtotal (<%= itemsWithStock %> items)</span>
                                <span class="font-medium">$<%= subTotal.toFixed(2) %></span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Shipping</span>
                                <input type="text" name="shipping" value="Free" hidden>
                                <span class="font-medium">Free</span>
                            </div>
                            <div class="flex justify-between">
                                
                                <span class="text-gray-600">Tax</span>
                                <% let tax = (subTotal * 0.05).toFixed(2)%>
                                <input type="number" name="tax" value="<%= Number(tax) %>" hidden>
                                <span class="font-medium">$<%= tax %></span>
                            </div>
                           
                            <div class="flex justify-between text-lg font-bold pt-2">
                                <span>Total</span>
                                <% let grandTotal = (Number(subTotal) + Number(tax)).toFixed(2) %>
                                <input type="text" name="grandTotal" value="<%= grandTotal %>" hidden>
                                <span>$<%= grandTotal  %></span>
                            </div>
                        </div>
                        
                        <!-- Terms and Place Order -->
                        
                    </div>


                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <!-- Shipping Address -->
                        <h2 class="text-xl font-bold mb-4">Shipping Address</h2>
                        <div class="border-gray-200 pt-1">
                            <input type="text" name="addressId" value="<%= defaultAddress?._id %>" hidden>
                            <div class="w-full bg-yellow-300 border border-yellow-400 rounded-xl mb-2 flex-wrap p-2">
                                <p class="flex font-bold"><i data-feather="info" class="w-4 h-4 mt-1 mr-1"></i>Info :</p>
                                <ul class="list-disc ml-6 text-sm">
                                    <li>This address will be used for delivery.</li>
                                    <li> To change it, select another address and set it as default.</li>
                                    <li>Adding a new address will automatically make it your default.</li>
                               </ul>
                                
                            </div>
                            <div class="text-md font-bold ">
                                <% if (defaultAddress) { %>
                                    <p><strong>Name:</strong><span id="firstName0"> <%= defaultAddress?.firstName %></span> <span id="lastName0"><%= defaultAddress?.lastName %></span></p>
                                    <p><strong>Country:</strong><span id="country0"> <%= defaultAddress?.country %></span></p>
                                    <p><strong>State:</strong><span id="state0"> <%= defaultAddress?.state %></span></p>
                                    <p><strong>City:</strong><span id="city0"> <%= defaultAddress?.city %></span></p>
                                    <p><strong>Address:</strong><span id="address0"> <%= defaultAddress?.address %></span></p>
                                    <p><strong>Pincode:</strong><span  id="pincode0" > <%= defaultAddress?.pincode %></span></p>
                                    <p  class="mt-2"><strong>Phone:</strong><span id="mobileNo0"> <%= defaultAddress?.mobileNo  %></span></p>
                                <% } else {%>
                                    <p class="text-gray-600 font-medium">Please add a delivery address to continue with checkout.</p>
                                <% } %>
                            </div>
                           
                        </div>
                        
                        <!-- Terms and Place Order -->
                        
                    </div>
                    <!-- Payment Method -->
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        
                        <h2 class="text-xl font-bold mb-4">Payment Method</h2>
                        <div class="space-y-4">
                           
                            <div class="flex items-center p-4 border border-gray-300 rounded-lg cursor-not-allowed">
                                <input type="radio" name="payment" id="card" disabled class="h-4 w-4 text-gray-400 focus:ring-gray-500 border-gray-300">
                                <label for="card" class="ml-3 block text-sm font-medium text-gray-400">
                                    Credit/Debit Card (Currently Unavailable)
                                </label>
                            </div>
                            <div class="flex items-center p-4 border border-gray-300 rounded-lg cursor-not-allowed">
                                <input type="radio" name="payment" id="wallet" disabled class="h-4 w-4 text-gray-400 focus:ring-gray-500 border-gray-300">
                                <label for="wallet" class="ml-3 block text-sm font-medium text-gray-400">
                                    <i data-feather=""></i>
                                    Nova Wallet (Currently Unavailable)
                                </label>
                            </div>
                            <div class="flex items-center p-4 border border-gray-300 rounded-lg bg-gray-50">
                                <input type="radio" name="paymentMethod" value="Cash on Delivery" id="cod" checked class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300">
                                <label for="cod" class="ml-3 block text-sm font-medium text-gray-700">
                                    Cash on Delivery (COD)
                                </label>
                            </div>

                            <div class="mt-6">
                                <label class="flex items-start">
                                    <!-- <input type="checkbox" class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded mt-1" name="terms"> -->
                                    <!-- <span class="ml-2 block text-sm text-gray-700">
                                        I agree to the <a href="#" class="text-blue-600 hover:text-blue-800">Terms and Conditions</a> and <a href="#" class="text-blue-600 hover:text-blue-800">Refund Policy</a>
                                    </span> -->
                                </label>
                                <% if (itemsWithStock === 0) { %>
                                    <button type="submit" class="w-full mt-4 py-3 px-4 btn-primary  font-bold rounded-md transition duration-300 flex items-center justify-center" disabled>
                                        <span>Place Order</span>
                                        <i data-feather="package" class="w-5 h-5 ml-2"></i>
                                    </button>
                                <% } else { %>
                                    <button type="submit" class="w-full mt-4 py-3 px-4 btn-primary  font-bold rounded-md transition duration-300 flex items-center justify-center" >
                                        <span>Place Order</span>
                                        <i data-feather="package" class="w-5 h-5 ml-2"></i>
                                    </button>
                                    <% } %>
                               
                                
                                
                            </div>
                        </div>
                    </div>

                   
                    
                </div>

                
                
               
            </div>
          </form>
        </div>
        
        
    </div>

    <!-- Add Address Modal -->
    <div id="addAddressModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md">
            <div class="flex justify-between items-center mb-4">
                <h2 id="addressFormHeading" class="text-xl font-bold">Add New Address</h2>
                <button id="closeAddAddressModalBtn" onclick="closeAddAddressModal()" class="text-gray-500 hover:text-gray-700">
                    <i data-feather="x"></i>
                </button>
            </div>
            <form id="addressModal" action="/address" method="post" class="space-y-4"  novalidate>
                <input type="text" name="redirect" value="/checkout" hidden>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                        <input type="text" id="firstName" name="firstName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                        <input type="text" id="lastName" name="lastName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    
                </div>
                <div>
                    <p id="reg-name-p" class="text-xs text-gray-500 mt-1">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="13"
                        height="13"
                        fill="currentColor"
                        class="bi bi-info-circle inline-block"
                        viewBox="0 0 16 16"
                      >
                        <path
                          d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
                        />
                        <path
                          d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"
                        />
                      </svg>
                      Name must contain only letters and spaces, with at least 5
                      characters and should not contain any number
                    </p>
                  </div>
                <div class="flex items-center">
                    <input type="checkbox" id="accountName" class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded">
                    <label id="forAccountName" for="accountName" class="ml-2 block text-sm text-gray-700">Same as account name</label>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">State / Province</label>
                        <input type="text" id="state" name="state" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">City</label>
                        <input type="text" id="city" name="city" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                </div>
    
                <div class="grid grid-cols-2 gap-4">
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                        <select id="countryList" name="country" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" onchange="doesTheCountryHavePincode(this.value)">
    
                            <option value="" selected>Select Country</option>
    
                            <option value="AF">ðŸ‡¦ðŸ‡« Afghanistan</option>
                            <option value="AL">ðŸ‡¦ðŸ‡± Albania</option>
                            <option value="DZ">ðŸ‡©ðŸ‡¿ Algeria</option>
                            <option value="AD">ðŸ‡¦ðŸ‡© Andorra</option>
                            <option value="AO">ðŸ‡¦ðŸ‡´ Angola</option>
                            <option value="AG">ðŸ‡¦ðŸ‡¬ Antigua and Barbuda</option>
                            <option value="AR">ðŸ‡¦ðŸ‡· Argentina</option>
                            <option value="AM">ðŸ‡¦ðŸ‡² Armenia</option>
                            <option value="AU">ðŸ‡¦ðŸ‡º Australia</option>
                            <option value="AT">ðŸ‡¦ðŸ‡¹ Austria</option>
                            <option value="AZ">ðŸ‡¦ðŸ‡¿ Azerbaijan</option>
                            
                            <option value="BS">ðŸ‡§ðŸ‡¸ Bahamas</option>
                            <option value="BH">ðŸ‡§ðŸ‡­ Bahrain</option>
                            <option value="BD">ðŸ‡§ðŸ‡© Bangladesh</option>
                            <option value="BB">ðŸ‡§ðŸ‡§ Barbados</option>
                            <option value="BY">ðŸ‡§ðŸ‡¾ Belarus</option>
                            <option value="BE">ðŸ‡§ðŸ‡ª Belgium</option>
                            <option value="BZ">ðŸ‡§ðŸ‡¿ Belize</option>
                            <option value="BJ">ðŸ‡§ðŸ‡¯ Benin</option>
                            <option value="BT">ðŸ‡§ðŸ‡¹ Bhutan</option>
                            <option value="BO">ðŸ‡§ðŸ‡´ Bolivia</option>
                            <option value="BA">ðŸ‡§ðŸ‡¦ Bosnia and Herzegovina</option>
                            <option value="BW">ðŸ‡§ðŸ‡¼ Botswana</option>
                            <option value="BR">ðŸ‡§ðŸ‡· Brazil</option>
                            <option value="BN">ðŸ‡§ðŸ‡³ Brunei</option>
                            <option value="BG">ðŸ‡§ðŸ‡¬ Bulgaria</option>
                            <option value="BF">ðŸ‡§ðŸ‡« Burkina Faso</option>
                            <option value="BI">ðŸ‡§ðŸ‡® Burundi</option>
                            
                            <option value="KH">ðŸ‡°ðŸ‡­ Cambodia</option>
                            <option value="CM">ðŸ‡¨ðŸ‡² Cameroon</option>
                            <option value="CA">ðŸ‡¨ðŸ‡¦ Canada</option>
                            <option value="CV">ðŸ‡¨ðŸ‡» Cape Verde</option>
                            <option value="CF">ðŸ‡¨ðŸ‡« Central African Republic</option>
                            <option value="TD">ðŸ‡¹ðŸ‡© Chad</option>
                            <option value="CL">ðŸ‡¨ðŸ‡± Chile</option>
                            <option value="CN">ðŸ‡¨ðŸ‡³ China</option>
                            <option value="CO">ðŸ‡¨ðŸ‡´ Colombia</option>
                            <option value="KM">ðŸ‡°ðŸ‡² Comoros</option>
                            <option value="CG">ðŸ‡¨ðŸ‡¬ Congo</option>
                            <option value="CR">ðŸ‡¨ðŸ‡· Costa Rica</option>
                            <option value="HR">ðŸ‡­ðŸ‡· Croatia</option>
                            <option value="CU">ðŸ‡¨ðŸ‡º Cuba</option>
                            <option value="CY">ðŸ‡¨ðŸ‡¾ Cyprus</option>
                            <option value="CZ">ðŸ‡¨ðŸ‡¿ Czech Republic</option>
                            
                            <option value="DK">ðŸ‡©ðŸ‡° Denmark</option>
                            <option value="DJ">ðŸ‡©ðŸ‡¯ Djibouti</option>
                            <option value="DM">ðŸ‡©ðŸ‡² Dominica</option>
                            <option value="DO">ðŸ‡©ðŸ‡´ Dominican Republic</option>
                            
                            <option value="EC">ðŸ‡ªðŸ‡¨ Ecuador</option>
                            <option value="EG">ðŸ‡ªðŸ‡¬ Egypt</option>
                            <option value="SV">ðŸ‡¸ðŸ‡» El Salvador</option>
                            <option value="GQ">ðŸ‡¬ðŸ‡¶ Equatorial Guinea</option>
                            <option value="ER">ðŸ‡ªðŸ‡· Eritrea</option>
                            <option value="EE">ðŸ‡ªðŸ‡ª Estonia</option>
                            <option value="SZ">ðŸ‡¸ðŸ‡¿ Eswatini</option>
                            <option value="ET">ðŸ‡ªðŸ‡¹ Ethiopia</option>
                            
                            <option value="FJ">ðŸ‡«ðŸ‡¯ Fiji</option>
                            <option value="FI">ðŸ‡«ðŸ‡® Finland</option>
                            <option value="FR">ðŸ‡«ðŸ‡· France</option>
                            
                            <option value="GA">ðŸ‡¬ðŸ‡¦ Gabon</option>
                            <option value="GM">ðŸ‡¬ðŸ‡² Gambia</option>
                            <option value="GE">ðŸ‡¬ðŸ‡ª Georgia</option>
                            <option value="DE">ðŸ‡©ðŸ‡ª Germany</option>
                            <option value="GH">ðŸ‡¬ðŸ‡­ Ghana</option>
                            <option value="GR">ðŸ‡¬ðŸ‡· Greece</option>
                            <option value="GD">ðŸ‡¬ðŸ‡© Grenada</option>
                            <option value="GT">ðŸ‡¬ðŸ‡¹ Guatemala</option>
                            <option value="GN">ðŸ‡¬ðŸ‡³ Guinea</option>
                            <option value="GW">ðŸ‡¬ðŸ‡¼ Guinea-Bissau</option>
                            <option value="GY">ðŸ‡¬ðŸ‡¾ Guyana</option>
                            
                            <option value="HT">ðŸ‡­ðŸ‡¹ Haiti</option>
                            <option value="HN">ðŸ‡­ðŸ‡³ Honduras</option>
                            <option value="HU">ðŸ‡­ðŸ‡º Hungary</option>
                            
                            <option value="IS">ðŸ‡®ðŸ‡¸ Iceland</option>
                            <option value="IN">ðŸ‡®ðŸ‡³ India</option>
                            <option value="ID">ðŸ‡®ðŸ‡© Indonesia</option>
                            <option value="IR">ðŸ‡®ðŸ‡· Iran</option>
                            <option value="IQ">ðŸ‡®ðŸ‡¶ Iraq</option>
                            <option value="IE">ðŸ‡®ðŸ‡ª Ireland</option>
                            <option value="IL">ðŸ‡®ðŸ‡± Israel</option>
                            <option value="IT">ðŸ‡®ðŸ‡¹ Italy</option>
                            
                            <option value="JM">ðŸ‡¯ðŸ‡² Jamaica</option>
                            <option value="JP">ðŸ‡¯ðŸ‡µ Japan</option>
                            <option value="JO">ðŸ‡¯ðŸ‡´ Jordan</option>
                            
                            <option value="KZ">ðŸ‡°ðŸ‡¿ Kazakhstan</option>
                            <option value="KE">ðŸ‡°ðŸ‡ª Kenya</option>
                            <option value="KI">ðŸ‡°ðŸ‡® Kiribati</option>
                            <option value="KP">ðŸ‡°ðŸ‡µ North Korea</option>
                            <option value="KR">ðŸ‡°ðŸ‡· South Korea</option>
                            <option value="KW">ðŸ‡°ðŸ‡¼ Kuwait</option>
                            <option value="KG">ðŸ‡°ðŸ‡¬ Kyrgyzstan</option>
                            
                            <option value="LA">ðŸ‡±ðŸ‡¦ Laos</option>
                            <option value="LV">ðŸ‡±ðŸ‡» Latvia</option>
                            <option value="LB">ðŸ‡±ðŸ‡§ Lebanon</option>
                            <option value="LS">ðŸ‡±ðŸ‡¸ Lesotho</option>
                            <option value="LR">ðŸ‡±ðŸ‡· Liberia</option>
                            <option value="LY">ðŸ‡±ðŸ‡¾ Libya</option>
                            <option value="LI">ðŸ‡±ðŸ‡® Liechtenstein</option>
                            <option value="LT">ðŸ‡±ðŸ‡¹ Lithuania</option>
                            <option value="LU">ðŸ‡±ðŸ‡º Luxembourg</option>
                            
                            <option value="MG">ðŸ‡²ðŸ‡¬ Madagascar</option>
                            <option value="MW">ðŸ‡²ðŸ‡¼ Malawi</option>
                            <option value="MY">ðŸ‡²ðŸ‡¾ Malaysia</option>
                            <option value="MV">ðŸ‡²ðŸ‡» Maldives</option>
                            <option value="ML">ðŸ‡²ðŸ‡± Mali</option>
                            <option value="MT">ðŸ‡²ðŸ‡¹ Malta</option>
                            <option value="MH">ðŸ‡²ðŸ‡­ Marshall Islands</option>
                            <option value="MR">ðŸ‡²ðŸ‡· Mauritania</option>
                            <option value="MU">ðŸ‡²ðŸ‡º Mauritius</option>
                            <option value="MX">ðŸ‡²ðŸ‡½ Mexico</option>
                            <option value="FM">ðŸ‡«ðŸ‡² Micronesia</option>
                            <option value="MD">ðŸ‡²ðŸ‡© Moldova</option>
                            <option value="MC">ðŸ‡²ðŸ‡¨ Monaco</option>
                            <option value="MN">ðŸ‡²ðŸ‡³ Mongolia</option>
                            <option value="ME">ðŸ‡²ðŸ‡ª Montenegro</option>
                            <option value="MA">ðŸ‡²ðŸ‡¦ Morocco</option>
                            <option value="MZ">ðŸ‡²ðŸ‡¿ Mozambique</option>
                            <option value="MM">ðŸ‡²ðŸ‡² Myanmar</option>
                            
                            <option value="NA">ðŸ‡³ðŸ‡¦ Namibia</option>
                            <option value="NR">ðŸ‡³ðŸ‡· Nauru</option>
                            <option value="NP">ðŸ‡³ðŸ‡µ Nepal</option>
                            <option value="NL">ðŸ‡³ðŸ‡± Netherlands</option>
                            <option value="NZ">ðŸ‡³ðŸ‡¿ New Zealand</option>
                            <option value="NI">ðŸ‡³ðŸ‡® Nicaragua</option>
                            <option value="NE">ðŸ‡³ðŸ‡ª Niger</option>
                            <option value="NG">ðŸ‡³ðŸ‡¬ Nigeria</option>
                            <option value="MK">ðŸ‡²ðŸ‡° North Macedonia</option>
                            <option value="NO">ðŸ‡³ðŸ‡´ Norway</option>
                            
                            <option value="OM">ðŸ‡´ðŸ‡² Oman</option>
                            
                            <option value="PK">ðŸ‡µðŸ‡° Pakistan</option>
                            <option value="PW">ðŸ‡µðŸ‡¼ Palau</option>
                            <option value="PA">ðŸ‡µðŸ‡¦ Panama</option>
                            <option value="PG">ðŸ‡µðŸ‡¬ Papua New Guinea</option>
                            <option value="PY">ðŸ‡µðŸ‡¾ Paraguay</option>
                            <option value="PE">ðŸ‡µðŸ‡ª Peru</option>
                            <option value="PH">ðŸ‡µðŸ‡­ Philippines</option>
                            <option value="PL">ðŸ‡µðŸ‡± Poland</option>
                            <option value="PT">ðŸ‡µðŸ‡¹ Portugal</option>
                            
                            <option value="QA">ðŸ‡¶ðŸ‡¦ Qatar</option>
                            
                            <option value="RO">ðŸ‡·ðŸ‡´ Romania</option>
                            <option value="RU">ðŸ‡·ðŸ‡º Russia</option>
                            <option value="RW">ðŸ‡·ðŸ‡¼ Rwanda</option>
                            
                            <option value="SA">ðŸ‡¸ðŸ‡¦ Saudi Arabia</option>
                            <option value="SN">ðŸ‡¸ðŸ‡³ Senegal</option>
                            <option value="RS">ðŸ‡·ðŸ‡¸ Serbia</option>
                            <option value="SC">ðŸ‡¸ðŸ‡¨ Seychelles</option>
                            <option value="SL">ðŸ‡¸ðŸ‡± Sierra Leone</option>
                            <option value="SG">ðŸ‡¸ðŸ‡¬ Singapore</option>
                            <option value="SK">ðŸ‡¸ðŸ‡° Slovakia</option>
                            <option value="SI">ðŸ‡¸ðŸ‡® Slovenia</option>
                            <option value="SB">ðŸ‡¸ðŸ‡§ Solomon Islands</option>
                            <option value="SO">ðŸ‡¸ðŸ‡´ Somalia</option>
                            <option value="ZA">ðŸ‡¿ðŸ‡¦ South Africa</option>
                            <option value="SS">ðŸ‡¸ðŸ‡¸ South Sudan</option>
                            <option value="ES">ðŸ‡ªðŸ‡¸ Spain</option>
                            <option value="LK">ðŸ‡±ðŸ‡° Sri Lanka</option>
                            <option value="SD">ðŸ‡¸ðŸ‡© Sudan</option>
                            <option value="SR">ðŸ‡¸ðŸ‡· Suriname</option>
                            <option value="SE">ðŸ‡¸ðŸ‡ª Sweden</option>
                            <option value="CH">ðŸ‡¨ðŸ‡­ Switzerland</option>
                            <option value="SY">ðŸ‡¸ðŸ‡¾ Syria</option>
                            
                            <option value="TW">ðŸ‡¹ðŸ‡¼ Taiwan</option>
                            <option value="TJ">ðŸ‡¹ðŸ‡¯ Tajikistan</option>
                            <option value="TZ">ðŸ‡¹ðŸ‡¿ Tanzania</option>
                            <option value="TH">ðŸ‡¹ðŸ‡­ Thailand</option>
                            <option value="TL">ðŸ‡¹ðŸ‡± Timor-Leste</option>
                            <option value="TG">ðŸ‡¹ðŸ‡¬ Togo</option>
                            <option value="TO">ðŸ‡¹ðŸ‡´ Tonga</option>
                            <option value="TT">ðŸ‡¹ðŸ‡¹ Trinidad and Tobago</option>
                            <option value="TN">ðŸ‡¹ðŸ‡³ Tunisia</option>
                            <option value="TR">ðŸ‡¹ðŸ‡· Turkey</option>
                            <option value="TM">ðŸ‡¹ðŸ‡² Turkmenistan</option>
                            <option value="TV">ðŸ‡¹ðŸ‡» Tuvalu</option>
                            
                            <option value="UG">ðŸ‡ºðŸ‡¬ Uganda</option>
                            <option value="UA">ðŸ‡ºðŸ‡¦ Ukraine</option>
                            <option value="AE">ðŸ‡¦ðŸ‡ª United Arab Emirates</option>
                            <option value="GB">ðŸ‡¬ðŸ‡§ United Kingdom</option>
                            <option value="US">ðŸ‡ºðŸ‡¸ United States</option>
                            
                            <option value="UY">ðŸ‡ºðŸ‡¾ Uruguay</option>
                            <option value="UZ">ðŸ‡ºðŸ‡¿ Uzbekistan</option>
                            
                            <option value="VU">ðŸ‡»ðŸ‡º Vanuatu</option>
                            <option value="VA">ðŸ‡»ðŸ‡¦ Vatican City</option>
                            <option value="VE">ðŸ‡»ðŸ‡ª Venezuela</option>
                            <option value="VN">ðŸ‡»ðŸ‡³ Vietnam</option>
                            
                            <option value="YE">ðŸ‡¾ðŸ‡ª Yemen</option>
                            
                            <option value="ZM">ðŸ‡¿ðŸ‡² Zambia</option>
                            <option value="ZW">ðŸ‡¿ðŸ‡¼ Zimbabwe</option>
                        
                          </select>
                          
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Postal Code / Pincode / ZIP</label>
                        <input type="text" id="pincode" name="pincode" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                </div>
    
                 
                <div>
                    <label for="phoneNumber" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                    <input type="tel" id="phoneNumber" name="mobileNo" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                
    
    
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                    <textarea type="text" id="address" name="address" class=" border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
                </div>
                
                <div class="flex items-center hidden">
                    <input type="checkbox" id="defaultAddress" name="isDefault" value="true" class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded" checked>
                    <label id="forDefaultAddress" for="defaultAddress" class="ml-2 block text-sm text-gray-700">Set as default address</label>
                </div>
                
                <div class="flex justify-end space-x-3 pt-4">
                    <button id="cancelAddAddressModalBtn" type="button" onclick="closeAddAddressModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="btn-primary font-bold px-4 py-2 border border-transparent rounded-lg ">
                        Save Address
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        let defaultAddressCard = document.getElementById("defaultAddressCard")
        if(defaultAddressCard === null){
                iziToast.info({
                    title: "Address Required",
                    message: "Please add a delivery address to continue checkout.",
                    position: "topRight",
                    timeout: 3000
                });

            document.getElementById("addAddressModal").classList.remove("hidden")
            document.getElementById("cancelAddAddressModalBtn").classList.add("hidden")
            document.getElementById("closeAddAddressModalBtn").classList.add("hidden")
        }
    </script>
    
    <%- include("../../public/javascript/user-javascript/address-management.ejs")%>
<%- include("../partials/user-side/footer.ejs")%>